if (NOT WIN32 AND NOT APPLE)
    macro (update_iconcache ICON_THEME)
        # Update mtime of hicolor icon theme dir.
        # We don't always have touch command (e.g. on Windows), so instead create
        #  and delete a temporary file in the theme dir.
        install(CODE "
        set(DESTDIR_VALUE \"\$ENV{DESTDIR}\")
        if (NOT DESTDIR_VALUE)
            file(WRITE \"${CMAKE_INSTALL_PREFIX}/share/icons/${ICON_THEME}/temp.txt\" \"update\")
            file(REMOVE \"${CMAKE_INSTALL_PREFIX}/share/icons/${ICON_THEME}/temp.txt\")
        endif (NOT DESTDIR_VALUE)
        ")
    endmacro (update_iconcache)
endif ()

if (WIN32 OR APPLE)
    install(FILES ${PROJECT_NAME}.svg DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/svg)
    install(FILES ${PROJECT_NAME}16.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/16 RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}22.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/22 RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}32.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/32 RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}48.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/48 RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}64.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/64 RENAME ${PROJECT_NAME}.png)
else ()
    install(FILES ${PROJECT_NAME}.svg DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/scalable/apps)
    install(FILES ${PROJECT_NAME}16.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/16x16/apps RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}22.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/22x22/apps RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}24.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/24x24/apps RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}32.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/32x32/apps RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}48.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/48x48/apps RENAME ${PROJECT_NAME}.png)
    install(FILES ${PROJECT_NAME}64.png DESTINATION ${CANTATA_ICON_INSTALL_PREFIX}/64x64/apps RENAME ${PROJECT_NAME}.png)
endif ()
